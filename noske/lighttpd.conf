server.modules = (
    "mod_redirect",
    "mod_access"
)
var.log_root                = "/var/log/lighttpd"
server.document-root        = "/var/www"
server.upload-dirs          = ( "/tmp/lighttpd" )
server.errorlog             = "/dev/fd/3"
server.breakagelog          = "/dev/fd/3"
server.pid-file             = "/tmp/lighttpd/lighttpd.pid"
server.port                 = "8080"

index-file.names            = ( "index.html" )

url.access-deny             = ( "~", ".inc" )

static-file.exclude-extensions = ( ".php", ".pl", ".fcgi", ".cgi" )

## Use ipv6 if available
#include_shell "/usr/share/lighttpd/use-ipv6.pl"

dir-listing.encoding        = "utf-8"
server.dir-listing          = "disable"

include "conf.d/mime.conf"

var.cache_dir               = "/var/cache/lighttpd"
include "conf.d/compress.conf"
compress.filetype           := ( "application/x-javascript", "text/css", "text/html", "text/plain" )

include "conf.d/access_log.conf"
accesslog.filename          := "/dev/fd/3"

include "conf.d/cgi.conf"

$HTTP["url"] =~ "^/bonito/run.cgi" {
	cgi.assign = ( ".cgi" => "/usr/bin/python2.7" )
}

$HTTP["url"] =~ "^/run.cgi" {
    url.redirect = ("^(/run.cgi.*)$" => "/bonito$1")
}

$HTTP["url"] =~ "^/?$" {
    url.redirect = ("" => "/crystal/index.html")
}
